<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Happy Birthday Periya Valu Akka Maa</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Warm handwritten fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Quicksand:wght@500&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      padding: 0;
      min-height: 100vh;
      background: radial-gradient(ellipse at bottom, #232526 0%, #1a1a1a 100%);
      overflow-x: hidden;
      position: relative;
    }
    .firefly {
      position: absolute;
      border-radius: 50%;
      width: 12px;
      height: 12px;
      background: radial-gradient(circle, #fffbe7 0%, #ffe37a 60%, transparent 100%);
      box-shadow: 0 0 20px 5px #ffe37a88, 0 0 80px 20px #ffecb399;
      opacity: 0.7;
      pointer-events: none;
      z-index: 1;
      animation: fireflymove 11s linear infinite;
      display: none;
    }
    @keyframes fireflymove {
      0% { transform: translateY(0) translateX(0) scale(1);}
      10% { opacity: 0.85;}
      50% { opacity: 0.5;}
      100% { transform: translateY(-350px) translateX(70px) scale(0.7); opacity: 0;}
    }
    .message-box {
      position: relative;
      z-index: 2;
      max-width: 95vw;
      margin: 45px auto 48px auto;
      padding: 40px 6vw 36px 6vw;
      background: rgba(255, 250, 225, 0.12);
      border-radius: 28px;
      box-shadow: 0 0 32px 5px #ffe37a15;
      text-align: center;
      display: none;
      animation: fadeInMain 1.1s;
    }
    @keyframes fadeInMain {
      from { opacity: 0; transform: translateY(60px);}
      to { opacity: 1; transform: translateY(0);}
    }
    .message {
      font-family: 'Pacifico', cursive;
      font-size: 2.3em;
      color: #ffe37a;
      text-shadow: 0 2px 12px #000a, 0 0 18px #ffe37aaa;
      letter-spacing: 1px;
      margin-bottom: 20px;
      min-height: 6em;
      white-space: pre-line;
      line-height: 1.4;
      overflow: hidden;
      word-break: break-word;
    }
    .signature {
      font-family: 'Quicksand', sans-serif;
      font-size: 1.25em;
      color: #ffea70;
      margin-top: 25px;
      text-shadow: 0 1px 8px #604c00cc;
      letter-spacing: 0.5px;
    }
    #getGiftBtn {
      display: none;
      margin: 42px auto 0 auto;
      font-size: 2em;
      padding: 22px 8vw;
      background: #ffd86b;
      color: #644c00;
      border: none;
      border-radius: 22px;
      font-weight: bold;
      box-shadow: 0 4px 22px #ffedb633, 0 2px 10px #000a;
      cursor: pointer;
      letter-spacing: 1px;
      transition: background 0.2s, transform 0.1s;
      animation: bounce 2.2s infinite, glow 1.5s infinite;
      z-index: 2;
      position: relative;
    }
    #getGiftBtn:active {
      background: #ffbc00;
      transform: scale(0.98);
    }
    @keyframes bounce {
      0%, 100% { transform: translateY(0);}
      30% { transform: translateY(-18px);}
      50% { transform: translateY(-7px);}
      70% { transform: translateY(-13px);}
    }
    @keyframes glow {
      0% { box-shadow: 0 0 18px 4px #ffd86b88; }
      50% { box-shadow: 0 0 38px 14px #ffecb399; }
      100% { box-shadow: 0 0 18px 4px #ffd86b88; }
    }

    /* --- Heartfelt Modal --- */
    #heartfeltModalBg {
      display: flex;
      position: fixed;
      inset: 0;
      width: 100vw; height: 100vh;
      z-index: 2000;
      justify-content: center;
      align-items: center;
      background: radial-gradient(ellipse at center, #f9ccd5 70%, #fff2f9 100%);
      overflow: hidden;
      animation: fadeInBg 1s;
      box-shadow: 0 0 160px 30px #ff89b7ee, 0 0 40px 8px #eabfff99;
    }
    @keyframes fadeInBg {
      from { opacity: 0;}
      to { opacity: 1;}
    }
    #heartfeltModal {
      background: rgba(255,255,255,0.98);
      border-radius: 42px;
      box-shadow: 0 0 48px 14px #ffbfe9cc, 0 2px 22px #8e458544, 0 0 80px 20px #ff69b466;
      padding: 48px 8vw 40px 8vw;
      max-width: 92vw;
      max-height: 90vh;
      text-align: center;
      position: relative;
      overflow: visible;
      animation: popHeartfelt 0.7s cubic-bezier(.23,1.29,.55,.99);
    }
    @keyframes popHeartfelt {
      0% { opacity: 0; transform: scale(0.7);}
      80% { opacity: 1; transform: scale(1.04);}
      100% { opacity: 1; transform: scale(1);}
    }
    #heartfeltMsgText {
      font-family: 'Pacifico', cursive;
      font-size: 2.1em;
      color: #8e4585;
      text-shadow: 0 2px 15px #ff89b744, 0 0 22px #e0aaff88;
      min-height: 6em;
      white-space: pre-line;
      margin-bottom: 18px;
      letter-spacing: 1.1px;
      word-break: break-word;
      line-height: 1.5;
      animation: fadeIn 1.2s;
    }
    #heartfeltHeart {
      font-size: 2.5em;
      display: none;
      margin-top: 16px;
      color: #f45aac;
      text-shadow: 0 0 18px #ffbbea, 0 0 52px #f45aac77;
      animation: pulseHeart 1.2s infinite alternate;
    }
    @keyframes pulseHeart {
      0% { transform: scale(1);}
      100% { transform: scale(1.18);}
    }
    #nextBtn {
      margin-top: 40px;
      font-size: 1.3em;
      padding: 12px 32px;
      border-radius: 16px;
      border: none;
      background: linear-gradient(90deg, #f9c1e4 40%, #ffe1f7 100%);
      color: #8e4585;
      box-shadow: 0 2px 16px #f9c1e4bb, 0 0px 3px #8e458566;
      font-family: 'Quicksand', sans-serif;
      font-weight: bold;
      cursor: pointer;
      letter-spacing: 1.4px;
      transition: background 0.2s, color 0.1s;
    }
    #nextBtn:active {
      background: linear-gradient(90deg, #ffe1f7 20%, #f9c1e4 100%);
      color: #f45aac;
    }

    /* Gift Modal */
    #giftModalBg {
      display: none;
      position: fixed;
      inset: 0;
      width: 100vw; height: 100vh;
      z-index: 3000;
      justify-content: center;
      align-items: center;
      background: rgba(40,10,50,0.49);
      animation: fadeInGiftBg 0.7s;
    }
    @keyframes fadeInGiftBg {
      from { opacity: 0;}
      to { opacity: 1;}
    }
    #giftModal {
      background: #fffaf4;
      border-radius: 36px;
      box-shadow: 0 8px 38px #ffd6d6ee, 0 2px 22px #8e458544;
      padding: 38px 5vw 32px 5vw;
      max-width: 92vw;
      max-height: 90vh;
      text-align: center;
      position: relative;
      overflow: visible;
      animation: popGift 0.8s cubic-bezier(.23,1.29,.55,.99);
    }
    @keyframes popGift {
      0% { opacity: 0; transform: scale(0.7);}
      80% { opacity: 1; transform: scale(1.04);}
      100% { opacity: 1; transform: scale(1);}
    }
    #giftImg {
      width: 90vw; max-width: 410px;
      border-radius: 28px;
      box-shadow: 0 2px 24px #ffb2b2cc;
      margin-bottom: 18px;
    }
    #giftCloseBtn {
      margin-top: 25px;
      font-size: 1.1em;
      padding: 10px 44px;
      border-radius: 14px;
      border: none;
      background: linear-gradient(90deg, #ffe1f7 20%, #f9c1e4 100%);
      color: #8e4585;
      font-family: 'Quicksand', sans-serif;
      font-weight: bold;
      box-shadow: 0 1px 10px #eabfff66, 0 0px 2px #8e458544;
      cursor: pointer;
      letter-spacing: 1.2px;
      transition: background 0.2s, color 0.1s;
    }
    #giftCloseBtn:active {
      background: linear-gradient(90deg, #f9c1e4 40%, #ffe1f7 100%);
      color: #f45aac;
    }
    /* Confetti canvas on top */
    #confetti-canvas {
      position: fixed;
      inset: 0;
      width: 100vw !important;
      height: 100vh !important;
      z-index: 4000;
      pointer-events: none;
      display: none;
    }
    @media (max-width: 600px) {
      .message {
        font-size: 1.19em;
      }
      #heartfeltMsgText {
        font-size: 1.09em;
      }
      #giftModal, #heartfeltModal {
        padding: 17vw 2vw 10vw 2vw;
      }
    }
  </style>
</head>
<body>
  <!-- Heartfelt Modal -->
  <div id="heartfeltModalBg">
    <div id="heartfeltModal">
      <div id="heartfeltMsgText"></div>
      <span id="heartfeltHeart">‚ù§Ô∏è</span>
      <br>
      <button id="nextBtn">Next</button>
    </div>
  </div>

  <!-- Fireflies -->
  <div id="fireflies"></div>

  <!-- Main Message Box -->
  <div class="message-box" id="mainMsgBox">
    <div class="message">
      Happy Birthday My Periya Valu Akka Maa!<br>
      <br>
      Wishing you a day as bright as your smile and a year as lovely as your heart.<br>
      Missing you loads, and sending you all the hugs and love I have!<br>
      <br>
      Enjoy your special day, Akka Maa!<br>
      <span style="font-size:1.7em;">ü•≥üéâ‚ú®</span>
    </div>
    <div class="signature">- with all love,<br>kutty valu</div>
  </div>

  <!-- Gift Button -->
  <button id="getGiftBtn">Click to get your birthday surprise from kutty valu üéÅ</button>

  <!-- Gift Modal -->
  <div id="giftModalBg">
    <div id="giftModal">
      <img id="giftImg" src="AkkaMaa.jpg" alt="Birthday Gift" />
      <audio id="birthdayAudio" src="birthday.mp3"></audio>
      <br>
      <button id="giftCloseBtn">Close</button>
    </div>
  </div>
  <canvas id="confetti-canvas"></canvas>

  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <script>
    // Heartfelt message to type out
    const heartfeltMsg = `Akka maa,
en life la unexpected aa vantha onna meet pannathuku apparam
life romba beautiful aa maariruchu.

Akka maa,
inaiku un birthday naa pakathula illa,
aana eppavum en heart la en akka oru special edathula iruka.
Naa romba romba lucky nee akka va kadaichathuku. ‚ù§Ô∏è`;

    // Typewriter effect for heartfelt modal
    const heartfeltMsgText = document.getElementById('heartfeltMsgText');
    const heartfeltHeart = document.getElementById('heartfeltHeart');
    let char = 0;

    function typeWriter() {
      if (char < heartfeltMsg.length) {
        heartfeltMsgText.innerHTML += heartfeltMsg.charAt(char) === "\n" ? "<br>" : heartfeltMsg.charAt(char);
        char++;
        setTimeout(typeWriter, heartfeltMsg.charAt(char-1)==="\n"?130:38);
      } else {
        heartfeltHeart.style.display = 'inline-block';
      }
    }
    typeWriter();

    // After heartfelt, show fireflies, main message, and gift button
    document.getElementById('nextBtn').onclick = function() {
      document.getElementById('heartfeltModalBg').style.display = 'none';
      // Show fireflies
      for(const ff of document.querySelectorAll('.firefly')) ff.style.display = '';
      // Show main message and gift button
      document.getElementById('mainMsgBox').style.display = '';
      document.getElementById('getGiftBtn').style.display = '';
    };

    // --- Fireflies code (initially hidden, appear after heartfelt) ---
    function randomBetween(a, b) {
      return a + Math.random() * (b - a);
    }
    // Make 18 fireflies
    for(let i=0; i<18; i++) {
      let ff = document.createElement('div');
      ff.className = 'firefly';
      ff.style.left = randomBetween(5,95) + 'vw';
      ff.style.top = randomBetween(15,88) + 'vh';
      ff.style.animationDuration = randomBetween(7,13) + 's';
      ff.style.animationDelay = randomBetween(0,9) + 's';
      // Initially hidden, will be shown after heartfelt modal
      ff.style.display = 'none';
      document.getElementById('fireflies').appendChild(ff);
    }

    // Gift modal logic
    const giftBtn = document.getElementById('getGiftBtn');
    const giftModalBg = document.getElementById('giftModalBg');
    const confettiCanvas = document.getElementById('confetti-canvas');
    const birthdayAudio = document.getElementById('birthdayAudio');

    giftBtn.onclick = function() {
      giftModalBg.style.display = 'flex';
      confettiCanvas.style.display = 'block';
      // Play audio
      birthdayAudio.currentTime = 0;
      birthdayAudio.play();
      // Confetti burst
      confetti.create(confettiCanvas, { resize: true })({
        particleCount: 170,
        spread: 130,
        origin: { y: 0.6 }
      });
      // Fade out main stuff
      document.getElementById('mainMsgBox').style.opacity = 0.28;
      giftBtn.style.opacity = 0.18;
      giftBtn.disabled = true;
    };
    // Close gift modal
    document.getElementById('giftCloseBtn').onclick = function() {
      giftModalBg.style.display = 'none';
      confettiCanvas.style.display = 'none';
      birthdayAudio.pause();
      // Restore
      document.getElementById('mainMsgBox').style.opacity = 1;
      giftBtn.style.opacity = 1;
      giftBtn.disabled = false;
    };
    // Click outside modal closes
    giftModalBg.onclick = function(e) {
      if(e.target===giftModalBg) document.getElementById('giftCloseBtn').onclick();
    };
  </script>
</body>
</html>
