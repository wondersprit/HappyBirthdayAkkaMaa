<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Happy Birthday Periya Valu Akka Maa</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Handwritten Google Font for warmth -->
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Quicksand:wght@500&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      padding: 0;
      min-height: 100vh;
      background: radial-gradient(ellipse at bottom, #232526 0%, #1a1a1a 100%);
      overflow-x: hidden;
      position: relative;
    }
    .firefly {
      position: absolute;
      border-radius: 50%;
      width: 12px;
      height: 12px;
      background: radial-gradient(circle, #fffbe7 0%, #ffe37a 60%, transparent 100%);
      box-shadow: 0 0 20px 5px #ffe37a88, 0 0 80px 20px #ffecb399;
      opacity: 0.7;
      pointer-events: none;
      z-index: 1;
      animation: fireflymove 11s linear infinite;
    }
    @keyframes fireflymove {
      0% { transform: translateY(0) translateX(0) scale(1);}
      10% { opacity: 0.85;}
      50% { opacity: 0.5;}
      100% { transform: translateY(-350px) translateX(70px) scale(0.7); opacity: 0;}
    }
    .message-box {
      position: relative;
      z-index: 2;
      max-width: 95vw;
      margin: 45px auto 48px auto;
      padding: 40px 6vw 36px 6vw;
      background: rgba(255, 250, 225, 0.12);
      border-radius: 28px;
      box-shadow: 0 0 32px 5px #ffe37a15;
      text-align: center;
    }
    .message {
      font-family: 'Pacifico', cursive;
      font-size: 2.3em;
      color: #8e4585;
      /* Deep violet for colourful, readable text */
      text-shadow: 0 2px 12px #fff9, 0 0 18px #ffe37aaa;
      letter-spacing: 1px;
      margin-bottom: 20px;
      min-height: 6em;
      white-space: pre-line;
      line-height: 1.4;
      overflow: hidden;
      word-break: break-word;
      transition: color 0.4s;
    }
    .highlight {
      color: #c2185b; /* Berry Pink */
      background: linear-gradient(90deg, #c2185b, #27c6c6);
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: gradientText 2s linear infinite alternate;
    }
    @keyframes gradientText {
      0% {
        background-position: 0% 50%;
      }
      100% {
        background-position: 100% 50%;
      }
    }
    .signature {
      font-family: 'Quicksand', sans-serif;
      font-size: 1.25em;
      color: #ffea70;
      margin-top: 25px;
      text-shadow: 0 1px 8px #604c00cc;
      letter-spacing: 0.5px;
    }
    #getGiftBtn {
      display: block;
      margin: 42px auto 0 auto;
      font-size: 2em;
      padding: 22px 8vw;
      background: linear-gradient(90deg, #c2185b, #27c6c6);
      color: #fff;
      border: none;
      border-radius: 22px;
      font-weight: bold;
      box-shadow: 0 4px 22px #ffedb633, 0 2px 10px #000a;
      cursor: pointer;
      letter-spacing: 1px;
      transition: background 0.2s, transform 0.1s;
      animation: bounce 2.2s infinite, glow 1.5s infinite;
      z-index: 2;
      position: relative;
    }
    #getGiftBtn:active {
      background: linear-gradient(90deg, #8e4585, #c2185b);
      transform: scale(0.98);
    }
    @keyframes bounce {
      0%, 100% { transform: translateY(0);}
      30% { transform: translateY(-18px);}
      50% { transform: translateY(-7px);}
      70% { transform: translateY(-13px);}
    }
    @keyframes glow {
      0% { box-shadow: 0 0 18px 4px #ffd86b88; }
      50% { box-shadow: 0 0 38px 14px #ffecb399; }
      100% { box-shadow: 0 0 18px 4px #ffd86b88; }
    }

    /* --- Heartfelt Modal --- */
    #heartfeltModalBg {
      display: flex;
      position: fixed;
      inset: 0;
      width: 100vw; height: 100vh;
      z-index: 2000;
      justify-content: center;
      align-items: center;
      background: radial-gradient(ellipse at center, #f9ccd5 70%, #fff2f9 100%);
      overflow: hidden;
      animation: fadeInBg 1s;
    }
    @keyframes fadeInBg {
      from { opacity: 0;}
      to { opacity: 1;}
    }
    #heartfeltModal {
      background: rgba(255,255,255,0.97);
      border-radius: 42px;
      box-shadow: 0 8px 38px #f9ccd5ee, 0 2px 22px #8e458544;
      padding: 48px 8vw 40px 8vw;
      max-width: 92vw;
      max-height: 90vh;
      text-align: center;
      position: relative;
      overflow: visible;
      animation: popHeartfelt 0.7s cubic-bezier(.23,1.2,.67,1);
    }
    @keyframes popHeartfelt {
      from { transform: scale(0.72) translateY(80px); opacity: 0;}
      65% { transform: scale(1.12) translateY(-12px);}
      to { transform: scale(1) translateY(0); opacity: 1;}
    }
    .pink-sparkle, .pink-heart {
      position: absolute;
      pointer-events: none;
      opacity: 0.9;
      z-index: 10;
      animation: sparkleFloat 3.8s infinite linear;
    }
    .pink-heart {
      width: 22px; height: 22px;
      background: radial-gradient(circle at 60% 30%, #ffb7c5 60%, #f9ccd5 100%);
      clip-path: polygon(50% 0%, 100% 35%, 82% 100%, 50% 80%, 18% 100%, 0% 35%);
      box-shadow: 0 4px 18px 1px #ffb7c555;
      animation: heartFloat 3.8s infinite linear;
    }
    @keyframes sparkleFloat {
      0% { transform: translateY(0) scale(1);}
      50% { opacity: 1; }
      100% { transform: translateY(-70px) scale(1.18); opacity: 0.1;}
    }
    @keyframes heartFloat {
      0% { transform: translateY(0) scale(1);}
      60% { opacity: 1;}
      100% { transform: translateY(-90px) scale(1.25); opacity: 0.11;}
    }
    #heartfeltMsgText {
      font-family: 'Pacifico', cursive;
      font-size: 2.1em;
      color: #8e4585;
      margin-bottom: 15px;
      min-height: 6em;
      white-space: pre-line;
      line-height: 1.45;
      overflow: hidden;
      word-break: break-word;
      letter-spacing: 1px;
      text-shadow: 0 2px 12px #fff9, 0 0 18px #f9ccd577;
      transition: color 0.4s;
    }
    #heartfeltHeart {
      display: inline-block;
      font-size: 2.6em;
      margin-top: 10px;
      color: #c2185b;
      filter: drop-shadow(0 2px 13px #ffb7c5aa);
      animation: heartBeat 1.3s infinite, heartGlow 2.8s infinite alternate;
      vertical-align: middle;
    }
    @keyframes heartBeat {
      0%, 100% { transform: scale(1);}
      25% { transform: scale(1.23);}
      50% { transform: scale(1.07);}
      75% { transform: scale(1.23);}
    }
    @keyframes heartGlow {
      0% { text-shadow: 0 0 12px #ffb7c5, 0 0 18px #fff2f9; }
      100% { text-shadow: 0 0 30px #c2185b, 0 0 32px #27c6c6; }
    }
    #nextBtn {
      display: none;
      margin-top: 34px;
      font-size: 1.3em;
      padding: 16px 48px;
      background: linear-gradient(90deg, #c2185b 60%, #27c6c6 100%);
      color: #fff;
      border: none;
      border-radius: 16px;
      cursor: pointer;
      font-weight: bold;
      letter-spacing: 0.5px;
      box-shadow: 0 2px 12px #c2185b31;
      transition: filter 0.2s, background 0.2s;
      animation: fadeInNext 1.2s;
    }
    @keyframes fadeInNext {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    #nextBtn:active {
      filter: brightness(0.94);
      background: linear-gradient(90deg, #8e4585, #c2185b);
    }
    /* --- End Heartfelt Modal --- */

    #modalBg {
      display: none;
      position: fixed;
      inset: 0;
      width: 100vw; height: 100vh;
      background: rgba(0,0,0,0.78);
      z-index: 100;
      justify-content: center;
      align-items: center;
    }
    #modal {
      background: #fffbe7;
      padding: 5vw 2vw 3vw 2vw;
      border-radius: 32px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.27);
      max-width: 99vw;
      width: 99vw;
      max-height: 98vh;
      text-align: center;
      position: relative;
      animation: modalIn 0.4s;
      overflow: auto;
    }
    @keyframes modalIn {
      from { transform: scale(0.7) translateY(80px); opacity: 0;}
      to { transform: scale(1) translateY(0); opacity: 1;}
    }
    #modal img {
      width: 94vw;
      max-width: 550px;
      height: auto;
      max-height: 60vh;
      border-radius: 20px;
      margin-bottom: 22px;
      box-shadow: 0 2px 28px 2px #ffe37a80, 0 2px 28px rgba(0,0,0,0.14);
      display: block;
      margin-left: auto;
      margin-right: auto;
      animation: popIn 0.7s cubic-bezier(.23,1.2,.67,1), float 3.5s ease-in-out infinite;
    }
    @keyframes popIn {
      0% { transform: scale(0.6) rotate(-10deg); opacity: 0; }
      60% { transform: scale(1.15) rotate(6deg); opacity: 1; }
      80% { transform: scale(0.98) rotate(-3deg);}
      100% { transform: scale(1) rotate(0deg);}
    }
    @keyframes float {
      0%, 100% { transform: translateY(0);}
      50% { transform: translateY(-18px);}
    }
    #modal audio.is-playing {
      animation: glowAudio 1.5s infinite alternate;
    }
    #modal audio {
      width: 94vw;
      max-width: 540px;
      margin: 20px auto 0 auto;
      display: block;
      height: 52px;
      transform: scale(1.3);
      transform-origin: top center;
      border-radius: 10px;
      outline: none;
      border: none;
    }
    #closeBtn {
      margin-top: 36px;
      font-size: 1.5em;
      padding: 14px 40px;
      background: #f8d478;
      color: #644c00;
      border: none;
      border-radius: 16px;
      cursor: pointer;
      font-weight: bold;
      display: inline-block;
      letter-spacing: 0.5px;
      box-shadow: 0 2px 12px rgba(0,0,0,0.10);
    }
    #closeBtn:active {
      background: #ffd86b;
    }
    @media (max-width: 600px) {
      .message-box { padding: 19px 2vw; border-radius: 14px;}
      .message { font-size: 1.2em;}
      #modal img { width: 97vw; max-width: 99vw; border-radius: 14px;}
      #modal { padding: 3vw 0.5vw 3vw 0.5vw; border-radius: 16px;}
      #getGiftBtn { font-size: 1.1em; padding: 12px 2vw; border-radius: 13px;}
      #closeBtn { font-size: 1.2em; padding: 10px 20px; border-radius: 10px;}
      #modal audio { width: 97vw; max-width: 99vw; transform: scale(1);}
      #heartfeltModal { padding: 22px 2vw 16px 2vw; border-radius: 18px;}
      #heartfeltMsgText { font-size: 1em;}
      #nextBtn { font-size: 1em; padding: 9px 2vw;}
    }
    @media (max-width: 400px) {
      .message { font-size: 1em;}
      #getGiftBtn { font-size: 0.98em; padding: 9px 2vw; }
      #closeBtn { font-size: 1em; padding: 9px 12px;}
      #heartfeltMsgText { font-size: 0.89em;}
      #nextBtn { font-size: 0.9em; padding: 6px 1vw;}
    }
  </style>
</head>
<body>
  <!-- Heartfelt Modal -->
  <div id="heartfeltModalBg">
    <div id="heartfeltModal">
      <!-- Pink floating hearts and sparkles will be dynamically added by JS -->
      <div id="heartfeltMsgText"></div>
      <span id="heartfeltHeart" style="display:none;">❤️</span>
      <br>
      <button id="nextBtn">Next</button>
    </div>
  </div>

  <!-- Fireflies will be dynamically added by JS -->
  <div class="message-box" style="display:none;">
    <div class="message" id="message"></div>
    <div class="signature" id="signature"></div>
  </div>
  <button id="getGiftBtn" style="display:none;">Click to get your birthday surprise 🎁</button>

  <!-- Modal Popup for Gift -->
  <div id="modalBg">
    <div id="modal">
      <img src="AkkaMaa.jpg" alt="Happy Birthday Periya Valu Akka Maa">
      <audio id="music" src="birthday.mp3" controls autoplay></audio>
      <br>
      <button id="closeBtn">Close</button>
    </div>
  </div>
  <!-- Confetti library -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <script>
    // --- Pink Hearts and Sparkles for Modal ---
    function spawnPinkHeartsAndSparkles() {
      const modal = document.getElementById('heartfeltModal');
      for (let i = 0; i < 13; i++) {
        setTimeout(() => {
          const type = Math.random() > 0.4 ? 'heart' : 'sparkle';
          const el = document.createElement('div');
          if (type === 'heart') {
            el.className = 'pink-heart';
            el.style.left = (10 + Math.random() * 80) + '%';
            el.style.top = (60 + Math.random() * 22) + '%';
            el.style.opacity = 0.45 + Math.random() * 0.45;
            el.style.animationDuration = (2.5 + Math.random() * 2.9) + 's';
          } else {
            el.className = 'pink-sparkle';
            el.style.left = (8 + Math.random() * 84) + '%';
            el.style.top = (50 + Math.random() * 35) + '%';
            el.style.width = el.style.height = (9 + Math.random()*10) + 'px';
            el.style.background = 'radial-gradient(circle at 60% 30%, #fff2f9 60%, #f9ccd5 100%)';
            el.style.borderRadius = '50%';
            el.style.opacity = 0.25 + Math.random() * 0.55;
            el.style.animationDuration = (1.7 + Math.random() * 2.5) + 's';
            el.style.boxShadow = '0 2px 12px #f9ccd577, 0 0 25px #fff2f9bb';
          }
          modal.appendChild(el);
          setTimeout(() => el.remove(), 3500 + Math.random()*2000);
        }, i * 180);
      }
      setTimeout(spawnPinkHeartsAndSparkles, 2700);
    }
    spawnPinkHeartsAndSparkles();

    // --- Heartfelt Message Modal Typewriter ---
    const heartfeltLines = [
      "Happy Birthday Periya Valu Akka Maa!",
      "Nee intha kutty valu ku romba romba special.",
      "First akka and best akka forever.",
      "",
      "Thanks for made my life beautiful DM akka",
      "Love you forever",
      "From kutty valu"
    ];
    const heartfeltMsgEl = document.getElementById('heartfeltMsgText');
    const heartfeltHeart = document.getElementById('heartfeltHeart');
    const nextBtn = document.getElementById('nextBtn');

    function colourfulTypewriter(lines, el, delay = 46, nextLineDelay = 630, cb) {
      let line = 0, char = 0;
      function type() {
        if (line < lines.length) {
          if (char < lines[line].length) {
            // For "special" words, wrap with .highlight
            let charToAdd = lines[line][char];
            if (lines[line].toLowerCase().includes('special') && char === lines[line].toLowerCase().indexOf('special')) {
              el.innerHTML += `<span class="highlight">special</span>`;
              char += 6;
              setTimeout(type, delay + 80);
              return;
            }
            el.innerHTML += charToAdd;
            char++;
            setTimeout(type, delay);
          } else {
            el.innerHTML += "<br>";
            char = 0; line++;
            setTimeout(type, nextLineDelay);
          }
        } else if(cb) {
          cb();
        }
      }
      type();
    }

    // Show heartfelt modal on load, hide rest
    document.querySelector('.message-box').style.display = 'none';
    document.getElementById('getGiftBtn').style.display = 'none';

    window.onload = function() {
      // Animate heartfelt message
      colourfulTypewriter(heartfeltLines, heartfeltMsgEl, 46, 690, () => {
        heartfeltHeart.style.display = 'inline-block';
        heartfeltHeart.animate([
          { opacity: 0, transform: 'scale(0.7)' },
          { opacity: 1, transform: 'scale(1.25)' },
          { opacity: 1, transform: 'scale(1)' }
        ], { duration: 700, fill: 'forwards' });
        setTimeout(() => {
          nextBtn.style.display = 'inline-block';
          nextBtn.animate([{ opacity: 0 }, { opacity: 1 }], { duration: 1200, fill: 'forwards' });
        }, 700);
      });
    };

    // Transition from heartfelt modal to main intro
    nextBtn.addEventListener('click', function() {
      document.getElementById('heartfeltModalBg').style.display = 'none';
      document.querySelector('.message-box').style.display = '';
      document.getElementById('getGiftBtn').style.display = '';
      // Animate main message and signature
      typeWriter([
        "Happy Birthday Periya Valu Akka Maa!",
        "Nee intha kutty valu ku romba romba special.",
        "First akka and best akka forever.",
        "",
        "Thanks for made my life beautiful DM akka",
        "Love you forever",
        "From kutty valu"
      ], document.getElementById('message'));
      document.getElementById('signature').innerHTML = "— Kutty Valu";
    });

    // --- Firefly background ---
    function createFirefly() {
      const firefly = document.createElement('div');
      firefly.className = 'firefly';
      const left = Math.random() * 100;
      firefly.style.left = left + 'vw';
      firefly.style.bottom = Math.random() * 30 + 'vh';
      firefly.style.opacity = 0.5 + Math.random() * 0.4;
      firefly.style.animationDuration = (8 + Math.random() * 7) + 's';
      firefly.style.filter = `blur(${Math.random() * 2}px)`;
      document.body.appendChild(firefly);
      setTimeout(() => firefly.remove(), 15000);
    }
    setInterval(createFirefly, 900);
    for (let i = 0; i < 24; i++) createFirefly();

    // --- Typewriter for Main Message ---
    function typeWriter(lines, el, delay = 45, nextLineDelay = 600) {
      let line = 0, char = 0;
      el.innerHTML = "";
      function type() {
        if (line < lines.length) {
          if (char < lines[line].length) {
            let charToAdd = lines[line][char];
            if (lines[line].toLowerCase().includes('special') && char === lines[line].toLowerCase().indexOf('special')) {
              el.innerHTML += `<span class="highlight">special</span>`;
              char += 6;
              setTimeout(type, delay + 80);
              return;
            }
            el.innerHTML += charToAdd;
            char++;
            setTimeout(type, delay);
          } else {
            el.innerHTML += "<br>";
            char = 0; line++;
            setTimeout(type, nextLineDelay);
          }
        }
      }
      type();
    }

    // --- Modal logic (gift surprise) ---
    const btn = document.getElementById('getGiftBtn');
    const modalBg = document.getElementById('modalBg');
    const music = document.getElementById('music');
    const closeBtn = document.getElementById('closeBtn');

    btn.addEventListener('click', function() {
      modalBg.style.display = 'flex';
      // Confetti burst on modal open
      confetti({
        particleCount: 120,
        spread: 85,
        origin: { y: 0.7 }
      });
      music.currentTime = 0;
      music.play();
      btn.style.display = 'none';
    });

    function hideGift() {
      modalBg.style.display = 'none';
      music.pause();
      music.currentTime = 0;
      btn.style.display = 'block'; // Show the button again
    }

    closeBtn.addEventListener('click', hideGift);

    // Allow closing modal by tapping outside (mobile-friendly)
    modalBg.addEventListener('click', function(e) {
      if (e.target === modalBg) {
        hideGift();
      }
    });

    // Animate audio player while playing
    music.addEventListener('play', function() {
      music.classList.add('is-playing');
    });
    music.addEventListener('pause', function() {
      music.classList.remove('is-playing');
    });
    if (!music.paused) {
      music.classList.add('is-playing');
    }
  </script>
</body>
</html>
